void function(root){
    "use strict"

    function make(type, value, from, to) {

        // Make a token object.

        return {
            type: type
            , value: value
            , from: from
            , to: to
        }
    }

    function tokenizer(source){
        var i = 0
            , length = source.length
            , token
            , tokens = []
            ;

        while ( i < length ) {

            tokenizer.types.forEach(function(type){
                while ( token = type.check(source, i) ) {
                    if ( ! token.ignore ) {
                        tokens.push(make(type.name, token.value, i, token.to))
                    }
                    i = token.to
                }
            })

        }

        return tokens
    }

    tokenizer.types = []
    tokenizer.add_type = function(name, check){
        tokenizer.types.push({name: name, check: check})
    }

    if ( module !== undefined && module.exports ) {
        module.exports = tokenizer
    } else {
        root.factory = tokenizer
    }

}(this)
